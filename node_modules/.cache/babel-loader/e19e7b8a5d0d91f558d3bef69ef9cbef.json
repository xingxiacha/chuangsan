{"remainingRequest":"F:\\gitee\\chuangsan\\chaoxing\\node_modules\\babel-loader\\lib\\index.js!F:\\gitee\\chuangsan\\chaoxing\\src\\store\\modules\\permission.js","dependencies":[{"path":"F:\\gitee\\chuangsan\\chaoxing\\src\\store\\modules\\permission.js","mtime":1696499424499},{"path":"F:\\gitee\\chuangsan\\chaoxing\\babel.config.js","mtime":1696499424117},{"path":"F:\\gitee\\chuangsan\\chaoxing\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696499873500},{"path":"F:\\gitee\\chuangsan\\chaoxing\\node_modules\\babel-loader\\lib\\index.js","mtime":1696499874028}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOi9naXRlZS9jaHVhbmdzYW4vY2hhb3hpbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8gc3RvcmUvbW9kdWxlcy9tb2R1bGVzL3Blcm1pc3Npb24uanMKaW1wb3J0IHsgY29uc3RhbnRSb3V0ZXMgfSBmcm9tICdAL3JvdXRlcic7IC8v5Yid5aeL6Lev55Sx6KGo77yM6YeM6Z2i5YyF5ZCr55m75b2V5ZKMNDA06aG16Z2i6Lev55SxCgovLyDmr5Tlr7nov4fmu6Tot6/nlLHooajvvIznlJ/miJDmnIDnu4jlj6/orr/pl67nmoTot6/nlLHooagKZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVzKHJvdXRlcywgcm9sZSkgewogIHJldHVybiByb3V0ZXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5tZXRhLnJvbGVzLmluY2x1ZGVzKHJvbGUpOwogIH0pOwp9CnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHJvdXRlczogW10sCiAgICBhZGRSb3V0ZXM6IFtdCiAgfTsKfTsKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1JPVVRFUzogZnVuY3Rpb24gU0VUX1JPVVRFUyhzdGF0ZSwgcm91dGVzKSB7CiAgICBzdGF0ZS5hZGRSb3V0ZXMgPSByb3V0ZXM7CiAgICBzdGF0ZS5yb3V0ZXMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGNvbnN0YW50Um91dGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHJvdXRlcykpOwogIH0sCiAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyDnlJ/miJDlj6/orr/pl67ot6/nlLHooagKICBnZW5lcmF0ZVJvdXRlczogZnVuY3Rpb24gZ2VuZXJhdGVSb3V0ZXMoX3JlZiwgX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciBhc3luY1JvdXRlcyA9IF9yZWYyLmFzeW5jUm91dGVzLAogICAgICByb2xlID0gX3JlZjIucm9sZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICB2YXIgYWNjZXNzZWRSb3V0ZXMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGZpbHRlckFzeW5jUm91dGVzKGFzeW5jUm91dGVzLCByb2xlKSksIFt7CiAgICAgICAgcGF0aDogJyonLAogICAgICAgIHJlZGlyZWN0OiAnLzQwNCcsCiAgICAgICAgaGlkZGVuOiB0cnVlCiAgICAgIH1dKTsKICAgICAgY29tbWl0KCdTRVRfUk9VVEVTJywgYWNjZXNzZWRSb3V0ZXMpOwogICAgICByZXNvbHZlKGFjY2Vzc2VkUm91dGVzKTsKICAgIH0pOwogIH0sCiAgLy8g6YeN572u6Lev55Sx77yM55So5LqO6YCA5Ye655m75b2V5pON5L2cCiAgcmVzZXRTdGF0ZTogZnVuY3Rpb24gcmVzZXRTdGF0ZShfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"names":["constantRoutes","filterAsyncRoutes","routes","role","filter","item","meta","roles","includes","getDefaultState","addRoutes","state","mutations","SET_ROUTES","concat","_toConsumableArray","RESET_STATE","Object","assign","actions","generateRoutes","_ref","_ref2","commit","asyncRoutes","Promise","resolve","accessedRoutes","path","redirect","hidden","resetState","_ref3","namespaced"],"sources":["F:/gitee/chuangsan/chaoxing/src/store/modules/permission.js"],"sourcesContent":["// store/modules/modules/permission.js\r\nimport { constantRoutes } from '@/router' //初始路由表，里面包含登录和404页面路由\r\n\r\n// 比对过滤路由表，生成最终可访问的路由表\r\nexport function filterAsyncRoutes(routes, role) {\r\n  return routes.filter(item => {\r\n    return item.meta.roles.includes(role)\r\n  })\r\n}\r\n\r\nconst getDefaultState = () => {\r\n  return {\r\n    routes: [],\r\n    addRoutes: []\r\n  }\r\n}\r\nconst state = getDefaultState();\r\n\r\nconst mutations = {\r\n  SET_ROUTES: (state, routes) => {\r\n    state.addRoutes = routes\r\n    state.routes = [\r\n      ...constantRoutes,\r\n      ...routes,\r\n    ]\r\n  },\r\n  RESET_STATE: state => {\r\n    Object.assign(state, getDefaultState())\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 生成可访问路由表\r\n  generateRoutes({ commit }, { asyncRoutes, role }) {\r\n    return new Promise(resolve => {\r\n      let accessedRoutes = [\r\n        ...filterAsyncRoutes(asyncRoutes, role),\r\n        { path: '*', redirect: '/404', hidden: true }\r\n      ]\r\n      commit('SET_ROUTES', accessedRoutes)\r\n      resolve(accessedRoutes)\r\n    })\r\n  },\r\n  // 重置路由，用于退出登录操作\r\n  resetState({ commit }) {\r\n    return new Promise(resolve => {\r\n      commit('RESET_STATE');\r\n      resolve();\r\n    });\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n"],"mappings":";;;;;;AAAA;AACA,SAASA,cAAc,QAAQ,UAAU,EAAC;;AAE1C;AACA,OAAO,SAASC,iBAAiBA,CAACC,MAAM,EAAEC,IAAI,EAAE;EAC9C,OAAOD,MAAM,CAACE,MAAM,CAAC,UAAAC,IAAI,EAAI;IAC3B,OAAOA,IAAI,CAACC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAACL,IAAI,CAAC;EACvC,CAAC,CAAC;AACJ;AAEA,IAAMM,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;EAC5B,OAAO;IACLP,MAAM,EAAE,EAAE;IACVQ,SAAS,EAAE;EACb,CAAC;AACH,CAAC;AACD,IAAMC,KAAK,GAAGF,eAAe,EAAE;AAE/B,IAAMG,SAAS,GAAG;EAChBC,UAAU,EAAE,SAAAA,WAACF,KAAK,EAAET,MAAM,EAAK;IAC7BS,KAAK,CAACD,SAAS,GAAGR,MAAM;IACxBS,KAAK,CAACT,MAAM,MAAAY,MAAA,CAAAC,kBAAA,CACPf,cAAc,GAAAe,kBAAA,CACdb,MAAM,EACV;EACH,CAAC;EACDc,WAAW,EAAE,SAAAA,YAAAL,KAAK,EAAI;IACpBM,MAAM,CAACC,MAAM,CAACP,KAAK,EAAEF,eAAe,EAAE,CAAC;EACzC;AACF,CAAC;AAED,IAAMU,OAAO,GAAG;EACd;EACAC,cAAc,WAAAA,eAAAC,IAAA,EAAAC,KAAA,EAAoC;IAAA,IAAjCC,MAAM,GAAAF,IAAA,CAANE,MAAM;IAAA,IAAMC,WAAW,GAAAF,KAAA,CAAXE,WAAW;MAAErB,IAAI,GAAAmB,KAAA,CAAJnB,IAAI;IAC5C,OAAO,IAAIsB,OAAO,CAAC,UAAAC,OAAO,EAAI;MAC5B,IAAIC,cAAc,MAAAb,MAAA,CAAAC,kBAAA,CACbd,iBAAiB,CAACuB,WAAW,EAAErB,IAAI,CAAC,IACvC;QAAEyB,IAAI,EAAE,GAAG;QAAEC,QAAQ,EAAE,MAAM;QAAEC,MAAM,EAAE;MAAK,CAAC,EAC9C;MACDP,MAAM,CAAC,YAAY,EAAEI,cAAc,CAAC;MACpCD,OAAO,CAACC,cAAc,CAAC;IACzB,CAAC,CAAC;EACJ,CAAC;EACD;EACAI,UAAU,WAAAA,WAAAC,KAAA,EAAa;IAAA,IAAVT,MAAM,GAAAS,KAAA,CAANT,MAAM;IACjB,OAAO,IAAIE,OAAO,CAAC,UAAAC,OAAO,EAAI;MAC5BH,MAAM,CAAC,aAAa,CAAC;MACrBG,OAAO,EAAE;IACX,CAAC,CAAC;EACJ;AACF,CAAC;AAED,eAAe;EACbO,UAAU,EAAE,IAAI;EAChBtB,KAAK,EAALA,KAAK;EACLC,SAAS,EAATA,SAAS;EACTO,OAAO,EAAPA;AACF,CAAC"}]}