{"remainingRequest":"F:\\githubpagetest\\chaoxing\\node_modules\\babel-loader\\lib\\index.js!F:\\githubpagetest\\chaoxing\\src\\permission.js","dependencies":[{"path":"F:\\githubpagetest\\chaoxing\\src\\permission.js","mtime":1696499424496},{"path":"F:\\githubpagetest\\chaoxing\\babel.config.js","mtime":1696499424117},{"path":"F:\\githubpagetest\\chaoxing\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696499873500},{"path":"F:\\githubpagetest\\chaoxing\\node_modules\\babel-loader\\lib\\index.js","mtime":1696499874028}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICcuL3N0b3JlJzsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOyAvLyBwcm9ncmVzcyBiYXIKaW1wb3J0ICducHJvZ3Jlc3MvbnByb2dyZXNzLmNzcyc7IC8vIHByb2dyZXNzIGJhciBzdHlsZQppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7IC8vIGdldCB0b2tlbiBmcm9tIGNvb2tpZQppbXBvcnQgZ2V0UGFnZVRpdGxlIGZyb20gJ0AvdXRpbHMvZ2V0LXBhZ2UtdGl0bGUnOwppbXBvcnQgeyBhc3luY1JvdXRlcyB9IGZyb20gJ0Avcm91dGVyJzsKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOyAvLyBOUHJvZ3Jlc3MgQ29uZmlndXJhdGlvbgoKdmFyIHdoaXRlTGlzdCA9IFsnL2xvZ2luJ107IC8vIG5vIHJlZGlyZWN0IHdoaXRlbGlzdAoKLy8gcm91dGVyLmJlZm9yZUVhY2goYXN5bmMgKHRvLCBmcm9tLCBuZXh0KSA9PiB7Ci8vICAgLy8gc3RhcnQgcHJvZ3Jlc3MgYmFyCi8vICAgTlByb2dyZXNzLnN0YXJ0KCkKCi8vICAgLy8gc2V0IHBhZ2UgdGl0bGUKLy8gICBkb2N1bWVudC50aXRsZSA9IGdldFBhZ2VUaXRsZSh0by5tZXRhLnRpdGxlKQoKLy8gICAvLyBkZXRlcm1pbmUgd2hldGhlciB0aGUgdXNlciBoYXMgbG9nZ2VkIGluCi8vICAgY29uc3QgaGFzVG9rZW4gPSBnZXRUb2tlbigpCi8vICAgaWYgKGhhc1Rva2VuKSB7Ci8vICAgICBsZXQgcm9sZSA9IHN0b3JlLmdldHRlcnMucm9sZQovLyAgICAgLy8gaWYgKCFzdG9yZS5nZXR0ZXJzLkluZm8pIHsKLy8gICAgIC8vICAgYXdhaXQgc3RvcmUuZGlzcGF0Y2goJ3VzZXIvZ2V0SW5mbycsIHJvbGUpCi8vICAgICAvLyB9Ci8vICAgICBpZiAodG8ucGF0aCA9PT0gJy9sb2dpbicpIHsKLy8gICAgICAgLy8gaWYgaXMgbG9nZ2VkIGluLCByZWRpcmVjdCB0byB0aGUgaG9tZSBwYWdlCi8vICAgICAgIG5leHQoeyBwYXRoOiAnLycgfSkKLy8gICAgICAgTlByb2dyZXNzLmRvbmUoKQovLyAgICAgfSBlbHNlIHsKLy8gICAgICAgaWYgKHN0b3JlLmdldHRlcnMucm91dGVzLmxlbmd0aCA9PT0gMCkgeyAvLyDliKTmlq3lvZPliY3nlKjmiLfmmK/lkKblt7Lmi4nlj5bov4fot6/nlLHooajkv6Hmga8KLy8gICAgICAgICAvLyDmi4nlj5bot6/nlLHooagKLy8gICAgICAgICBzdG9yZS5kaXNwYXRjaCgncGVybWlzc2lvbi9nZW5lcmF0ZVJvdXRlcycsIHsgYXN5bmNSb3V0ZXMsIHJvbGUgfSkudGhlbihhZGRSb3V0ZXJzID0+IHsgLy8g55Sf5oiQ5Y+v6K6/6Zeu55qE6Lev55Sx6KGo77yMYXN5bmNSb3V0ZXPmgLvot6/nlLHooajvvIxhZGRSb3V0ZXJzIOi/h+a7pOWQjumcgOimgeWKqOaAgeaMgui9veeahOi3r+eUseihqAovLyAgICAgICAgICAgcm91dGVyLmFkZFJvdXRlcyhhZGRSb3V0ZXJzKQovLyAgICAgICAgICAgbmV4dCh7IC4uLnRvLCByZXBsYWNlOiB0cnVlIH0pIC8vIGhhY2vmlrnms5Ug56Gu5L+dYWRkUm91dGVz5bey5a6M5oiQICxzZXQgdGhlIHJlcGxhY2U6IHRydWUgc28gdGhlIG5hdmlnYXRpb24gd2lsbCBub3QgbGVhdmUgYSBoaXN0b3J5IHJlY29yZAovLyAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7Ci8vICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwovLyAgICAgICAgIH0pOwovLyAgICAgICB9IGVsc2UgewovLyAgICAgICAgIG5leHQoKSAvL+W9k+acieeUqOaIt+adg+mZkOeahOaXtuWAme+8jOivtOaYjuaJgOacieWPr+iuv+mXrui3r+eUseW3sueUn+aIkCDlpoLorr/pl67msqHmnYPpmZDnmoTlhajpnaLkvJroh6rliqjov5vlhaU0MDTpobXpnaIKLy8gICAgICAgfQovLyAgICAgfQovLyAgIH0gZWxzZSB7Ci8vICAgICAvKiBoYXMgbm8gdG9rZW4qLwoKLy8gICAgIGlmICh3aGl0ZUxpc3QuaW5kZXhPZih0by5wYXRoKSAhPT0gLTEpIHsKLy8gICAgICAgLy8gaW4gdGhlIGZyZWUgbG9naW4gd2hpdGVsaXN0LCBnbyBkaXJlY3RseQovLyAgICAgICBuZXh0KCkKLy8gICAgIH0gZWxzZSB7Ci8vICAgICAgIC8vIG90aGVyIHBhZ2VzIHRoYXQgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgYXJlIHJlZGlyZWN0ZWQgdG8gdGhlIGxvZ2luIHBhZ2UuCi8vICAgICAgIG5leHQoYC9sb2dpbj9yZWRpcmVjdD0ke3RvLnBhdGh9YCkKLy8gICAgICAgTlByb2dyZXNzLmRvbmUoKQovLyAgICAgfQovLyAgIH0KLy8gfSkKCi8vIHJvdXRlci5hZnRlckVhY2goKCkgPT4gewovLyAgIC8vIGZpbmlzaCBwcm9ncmVzcyBiYXIKLy8gICBOUHJvZ3Jlc3MuZG9uZSgpCi8vIH0p"},{"version":3,"names":["router","store","NProgress","getToken","getPageTitle","asyncRoutes","configure","showSpinner","whiteList"],"sources":["F:/githubpagetest/chaoxing/src/permission.js"],"sourcesContent":["import router from './router'\r\nimport store from './store'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nimport { getToken } from '@/utils/auth' // get token from cookie\r\nimport getPageTitle from '@/utils/get-page-title'\r\nimport { asyncRoutes } from '@/router'\r\n\r\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\r\n\r\nconst whiteList = ['/login'] // no redirect whitelist\r\n\r\n// router.beforeEach(async (to, from, next) => {\r\n//   // start progress bar\r\n//   NProgress.start()\r\n\r\n//   // set page title\r\n//   document.title = getPageTitle(to.meta.title)\r\n\r\n//   // determine whether the user has logged in\r\n//   const hasToken = getToken()\r\n//   if (hasToken) {\r\n//     let role = store.getters.role\r\n//     // if (!store.getters.Info) {\r\n//     //   await store.dispatch('user/getInfo', role)\r\n//     // }\r\n//     if (to.path === '/login') {\r\n//       // if is logged in, redirect to the home page\r\n//       next({ path: '/' })\r\n//       NProgress.done()\r\n//     } else {\r\n//       if (store.getters.routes.length === 0) { // 判断当前用户是否已拉取过路由表信息\r\n//         // 拉取路由表\r\n//         store.dispatch('permission/generateRoutes', { asyncRoutes, role }).then(addRouters => { // 生成可访问的路由表，asyncRoutes总路由表，addRouters 过滤后需要动态挂载的路由表\r\n//           router.addRoutes(addRouters)\r\n//           next({ ...to, replace: true }) // hack方法 确保addRoutes已完成 ,set the replace: true so the navigation will not leave a history record\r\n//         }).catch(err => {\r\n//           console.log(err);\r\n//         });\r\n//       } else {\r\n//         next() //当有用户权限的时候，说明所有可访问路由已生成 如访问没权限的全面会自动进入404页面\r\n//       }\r\n//     }\r\n//   } else {\r\n//     /* has no token*/\r\n\r\n//     if (whiteList.indexOf(to.path) !== -1) {\r\n//       // in the free login whitelist, go directly\r\n//       next()\r\n//     } else {\r\n//       // other pages that do not have permission to access are redirected to the login page.\r\n//       next(`/login?redirect=${to.path}`)\r\n//       NProgress.done()\r\n//     }\r\n//   }\r\n// })\r\n\r\n// router.afterEach(() => {\r\n//   // finish progress bar\r\n//   NProgress.done()\r\n// })\r\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,SAAS,MAAM,WAAW,EAAC;AAClC,OAAO,yBAAyB,EAAC;AACjC,SAASC,QAAQ,QAAQ,cAAc,EAAC;AACxC,OAAOC,YAAY,MAAM,wBAAwB;AACjD,SAASC,WAAW,QAAQ,UAAU;AAEtCH,SAAS,CAACI,SAAS,CAAC;EAAEC,WAAW,EAAE;AAAM,CAAC,CAAC,EAAC;;AAE5C,IAAMC,SAAS,GAAG,CAAC,QAAQ,CAAC,EAAC;;AAE7B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA"}]}