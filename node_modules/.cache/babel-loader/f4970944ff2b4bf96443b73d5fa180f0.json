{"remainingRequest":"F:\\githubpagetest\\chaoxing\\node_modules\\babel-loader\\lib\\index.js!F:\\githubpagetest\\chaoxing\\src\\store\\modules\\permission.js","dependencies":[{"path":"F:\\githubpagetest\\chaoxing\\src\\store\\modules\\permission.js","mtime":1696499424499},{"path":"F:\\githubpagetest\\chaoxing\\babel.config.js","mtime":1696499424117},{"path":"F:\\githubpagetest\\chaoxing\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696499873500},{"path":"F:\\githubpagetest\\chaoxing\\node_modules\\babel-loader\\lib\\index.js","mtime":1696499874028}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOi9naXRodWJwYWdldGVzdC9jaGFveGluZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwovLyBzdG9yZS9tb2R1bGVzL21vZHVsZXMvcGVybWlzc2lvbi5qcwppbXBvcnQgeyBjb25zdGFudFJvdXRlcyB9IGZyb20gJ0Avcm91dGVyJzsgLy/liJ3lp4vot6/nlLHooajvvIzph4zpnaLljIXlkKvnmbvlvZXlkow0MDTpobXpnaLot6/nlLEKCi8vIOavlOWvuei/h+a7pOi3r+eUseihqO+8jOeUn+aIkOacgOe7iOWPr+iuv+mXrueahOi3r+eUseihqApleHBvcnQgZnVuY3Rpb24gZmlsdGVyQXN5bmNSb3V0ZXMocm91dGVzLCByb2xlKSB7CiAgcmV0dXJuIHJvdXRlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLm1ldGEucm9sZXMuaW5jbHVkZXMocm9sZSk7CiAgfSk7Cn0KdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgcm91dGVzOiBbXSwKICAgIGFkZFJvdXRlczogW10KICB9Owp9Owp2YXIgc3RhdGUgPSBnZXREZWZhdWx0U3RhdGUoKTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfUk9VVEVTOiBmdW5jdGlvbiBTRVRfUk9VVEVTKHN0YXRlLCByb3V0ZXMpIHsKICAgIHN0YXRlLmFkZFJvdXRlcyA9IHJvdXRlczsKICAgIHN0YXRlLnJvdXRlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoY29uc3RhbnRSb3V0ZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkocm91dGVzKSk7CiAgfSwKICBSRVNFVF9TVEFURTogZnVuY3Rpb24gUkVTRVRfU1RBVEUoc3RhdGUpIHsKICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIGdldERlZmF1bHRTdGF0ZSgpKTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIOeUn+aIkOWPr+iuv+mXrui3r+eUseihqAogIGdlbmVyYXRlUm91dGVzOiBmdW5jdGlvbiBnZW5lcmF0ZVJvdXRlcyhfcmVmLCBfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgdmFyIGFzeW5jUm91dGVzID0gX3JlZjIuYXN5bmNSb3V0ZXMsCiAgICAgIHJvbGUgPSBfcmVmMi5yb2xlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHZhciBhY2Nlc3NlZFJvdXRlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZmlsdGVyQXN5bmNSb3V0ZXMoYXN5bmNSb3V0ZXMsIHJvbGUpKSwgW3sKICAgICAgICBwYXRoOiAnKicsCiAgICAgICAgcmVkaXJlY3Q6ICcvNDA0JywKICAgICAgICBoaWRkZW46IHRydWUKICAgICAgfV0pOwogICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCBhY2Nlc3NlZFJvdXRlcyk7CiAgICAgIHJlc29sdmUoYWNjZXNzZWRSb3V0ZXMpOwogICAgfSk7CiAgfSwKICAvLyDph43nva7ot6/nlLHvvIznlKjkuo7pgIDlh7rnmbvlvZXmk43kvZwKICByZXNldFN0YXRlOiBmdW5jdGlvbiByZXNldFN0YXRlKF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"names":["constantRoutes","filterAsyncRoutes","routes","role","filter","item","meta","roles","includes","getDefaultState","addRoutes","state","mutations","SET_ROUTES","concat","_toConsumableArray","RESET_STATE","Object","assign","actions","generateRoutes","_ref","_ref2","commit","asyncRoutes","Promise","resolve","accessedRoutes","path","redirect","hidden","resetState","_ref3","namespaced"],"sources":["F:/githubpagetest/chaoxing/src/store/modules/permission.js"],"sourcesContent":["// store/modules/modules/permission.js\r\nimport { constantRoutes } from '@/router' //初始路由表，里面包含登录和404页面路由\r\n\r\n// 比对过滤路由表，生成最终可访问的路由表\r\nexport function filterAsyncRoutes(routes, role) {\r\n  return routes.filter(item => {\r\n    return item.meta.roles.includes(role)\r\n  })\r\n}\r\n\r\nconst getDefaultState = () => {\r\n  return {\r\n    routes: [],\r\n    addRoutes: []\r\n  }\r\n}\r\nconst state = getDefaultState();\r\n\r\nconst mutations = {\r\n  SET_ROUTES: (state, routes) => {\r\n    state.addRoutes = routes\r\n    state.routes = [\r\n      ...constantRoutes,\r\n      ...routes,\r\n    ]\r\n  },\r\n  RESET_STATE: state => {\r\n    Object.assign(state, getDefaultState())\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 生成可访问路由表\r\n  generateRoutes({ commit }, { asyncRoutes, role }) {\r\n    return new Promise(resolve => {\r\n      let accessedRoutes = [\r\n        ...filterAsyncRoutes(asyncRoutes, role),\r\n        { path: '*', redirect: '/404', hidden: true }\r\n      ]\r\n      commit('SET_ROUTES', accessedRoutes)\r\n      resolve(accessedRoutes)\r\n    })\r\n  },\r\n  // 重置路由，用于退出登录操作\r\n  resetState({ commit }) {\r\n    return new Promise(resolve => {\r\n      commit('RESET_STATE');\r\n      resolve();\r\n    });\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n"],"mappings":";;;;;;AAAA;AACA,SAASA,cAAc,QAAQ,UAAU,EAAC;;AAE1C;AACA,OAAO,SAASC,iBAAiBA,CAACC,MAAM,EAAEC,IAAI,EAAE;EAC9C,OAAOD,MAAM,CAACE,MAAM,CAAC,UAAAC,IAAI,EAAI;IAC3B,OAAOA,IAAI,CAACC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAACL,IAAI,CAAC;EACvC,CAAC,CAAC;AACJ;AAEA,IAAMM,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;EAC5B,OAAO;IACLP,MAAM,EAAE,EAAE;IACVQ,SAAS,EAAE;EACb,CAAC;AACH,CAAC;AACD,IAAMC,KAAK,GAAGF,eAAe,EAAE;AAE/B,IAAMG,SAAS,GAAG;EAChBC,UAAU,EAAE,SAAAA,WAACF,KAAK,EAAET,MAAM,EAAK;IAC7BS,KAAK,CAACD,SAAS,GAAGR,MAAM;IACxBS,KAAK,CAACT,MAAM,MAAAY,MAAA,CAAAC,kBAAA,CACPf,cAAc,GAAAe,kBAAA,CACdb,MAAM,EACV;EACH,CAAC;EACDc,WAAW,EAAE,SAAAA,YAAAL,KAAK,EAAI;IACpBM,MAAM,CAACC,MAAM,CAACP,KAAK,EAAEF,eAAe,EAAE,CAAC;EACzC;AACF,CAAC;AAED,IAAMU,OAAO,GAAG;EACd;EACAC,cAAc,WAAAA,eAAAC,IAAA,EAAAC,KAAA,EAAoC;IAAA,IAAjCC,MAAM,GAAAF,IAAA,CAANE,MAAM;IAAA,IAAMC,WAAW,GAAAF,KAAA,CAAXE,WAAW;MAAErB,IAAI,GAAAmB,KAAA,CAAJnB,IAAI;IAC5C,OAAO,IAAIsB,OAAO,CAAC,UAAAC,OAAO,EAAI;MAC5B,IAAIC,cAAc,MAAAb,MAAA,CAAAC,kBAAA,CACbd,iBAAiB,CAACuB,WAAW,EAAErB,IAAI,CAAC,IACvC;QAAEyB,IAAI,EAAE,GAAG;QAAEC,QAAQ,EAAE,MAAM;QAAEC,MAAM,EAAE;MAAK,CAAC,EAC9C;MACDP,MAAM,CAAC,YAAY,EAAEI,cAAc,CAAC;MACpCD,OAAO,CAACC,cAAc,CAAC;IACzB,CAAC,CAAC;EACJ,CAAC;EACD;EACAI,UAAU,WAAAA,WAAAC,KAAA,EAAa;IAAA,IAAVT,MAAM,GAAAS,KAAA,CAANT,MAAM;IACjB,OAAO,IAAIE,OAAO,CAAC,UAAAC,OAAO,EAAI;MAC5BH,MAAM,CAAC,aAAa,CAAC;MACrBG,OAAO,EAAE;IACX,CAAC,CAAC;EACJ;AACF,CAAC;AAED,eAAe;EACbO,UAAU,EAAE,IAAI;EAChBtB,KAAK,EAALA,KAAK;EACLC,SAAS,EAATA,SAAS;EACTO,OAAO,EAAPA;AACF,CAAC"}]}